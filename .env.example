# Environment Configuration for B2C Nutrition App

# Server Configuration
NODE_ENV=development
PORT=5000

# Database Configuration (Supabase)
# Get this from your Supabase project dashboard -> Settings -> Database
# Use the "Transaction pooler" connection string under "Connection string"
DATABASE_URL="postgresql://postgres.your-project-ref:[YOUR-PASSWORD]@aws-0-us-west-1.pooler.supabase.com:5432/postgres"

# Appwrite Configuration
# Get these from your Appwrite console -> Project Settings
APPWRITE_ENDPOINT=https://cloud.appwrite.io/v1
APPWRITE_PROJECT_ID=your_project_id_here

# Admin Team Configuration
# Create a team in Appwrite and use its ID here for admin permissions
ADMINS_TEAM_ID=your_admin_team_id_here

# JWT Configuration (optional, uses Appwrite defaults if not specified)
JWT_AUDIENCE=your_jwt_audience
JWT_ISSUER=your_jwt_issuer

# Rate Limiting Configuration
RATE_LIMITS_READ_RPM=60
RATE_LIMITS_WRITE_RPM=6

# LiteLLM / OpenAI Configuration
# Project-level shared keys (use these in application code, NOT personal dev keys)
# Base URL for LiteLLM proxy
LITELLM_BASE_URL=https://litellm.confer.today/v1

# Model-specific API keys (project-level shared keys)
# GPT-5-mini key for text analysis (default)
LITELLM_API_KEY=sk-id0TxnmuqzlegVm-1V5tEw
# Alternative: use LITELLM_API_KEY_MINI if you prefer explicit naming
# LITELLM_API_KEY_MINI=sk-id0TxnmuqzlegVm-1V5tEw

# GPT-5-ALL key for vision/OCR (Phase 2)
LITELLM_API_KEY_VISION=sk-yro00aoQNeQCwajap9tOVQ
# Alternative: use LITELLM_API_KEY_ALL if you prefer explicit naming
# LITELLM_API_KEY_ALL=sk-yro00aoQNeQCwajap9tOVQ

# Model selection (proxy requires "openai/" prefix)
# gpt-5-nano is fastest for text analysis; gpt-5-mini for more complex tasks
LLM_MODEL=openai/gpt-5-nano
LLM_VISION_MODEL=openai/gpt-5-mini

# Note: GPT-5-nano key available: sk-uFBf12ZFMqEwMypw36JE2A
# Use LITELLM_API_KEY_NANO if you want to use nano model instead

# Development Mode Settings
# These are automatically set for development
TRUST_PROXY=1
CORS_ALLOW_ALL=0
# Comma-separated allowed browser origins for CORS.
# Supports exact origins and wildcard patterns.
# Example wildcard for Vercel previews:
#   https://nutri-b2c-frontend-*.vercel.app
WEB_ORIGINS=http://127.0.0.1:3000,http://localhost:3000,https://nutri-b2c-frontend.vercel.app,https://nutri-b2c-frontend-*.vercel.app

# Production Considerations:
# - Use environment-specific database URLs
# - Set NODE_ENV=production for production deployments
# - Configure proper CORS origins
# - Use secure JWT secrets
# - Set up proper logging levels
# - Configure backup and monitoring

# Instructions for Supabase Database Setup:
# 1. Go to https://supabase.com/dashboard/projects
# 2. Create a new project or select existing one
# 3. Go to Settings -> Database
# 4. Copy the connection string from "Connection string" -> "Transaction pooler"
# 5. Replace [YOUR-PASSWORD] with your actual database password
# 6. Run migrations: npm run db:push

# Instructions for Appwrite Setup:
# 1. Go to https://cloud.appwrite.io/ or your self-hosted Appwrite instance
# 2. Create a new project
# 3. Copy Project ID from Project Settings
# 4. Create a team for admins and copy the Team ID
# 5. Set up authentication providers as needed

# ── AI Meal Planner (PRD-04) ──────────────────────────────────────────────
# Uses existing LITELLM_API_KEY for LLM calls
MEAL_PLAN_LLM_MODEL=gpt-4o-mini
MEAL_PLAN_MAX_RECIPES=150
MEAL_PLAN_TIMEOUT_MS=30000
# Cooldown window after provider rate-limit/outage errors (ms)
MEAL_PLAN_LLM_COOLDOWN_MS=120000
# Swap-specific timeout (ms)
MEAL_PLAN_SWAP_TIMEOUT_MS=15000
